Difference	O
between	O
map	B-API
,	O
applymap	B-API
and	O
apply	B-API
methods	O
in	O
Pandas	O

Can	O
you	O
tell	O
me	O
when	O
to	O
use	O
these	O
vectorization	O
methods	O
with	O
basic	O
examples	O
?	O

I	O
see	O
that	O
`	O
map	B-API
`	O
is	O
a	O
`	O
Series	B-API
`	O
method	O
whereas	O
the	O
rest	O
are	O
`	O
DataFrame	B-API
`	O
methods	O
.	O

I	O
got	O
confused	O
about	O
`	O
apply	B-API
`	O
and	O
`	O
applymap	B-API
`	O
methods	O
though	O
.	O

Why	O
do	O
we	O
have	O
two	O
methods	O
for	O
applying	O
a	O
function	O
to	O
a	O
DataFrame	B-API
?	O

Again	O
,	O
simple	O
examples	O
which	O
illustrate	O
the	O
usage	O
would	O
be	O
great	O
!	O

Thanks	O
!	O

Straight	O
from	O
Wes	O
McKinney's	O
Python	O
for	O
Data	O
Analysis	O
book	O
,	O
pg	O
.	O

132	O
(	O
I	O
highly	O
recommended	O
this	O
book	O
):	O

Another	O
frequent	O
operation	O
is	O
applying	O
a	O
function	O
on	O
1D	O
arrays	O
to	O
each	O
column	O
or	O
row	O
.	O

DataFrame	B-API
s	O
apply	B-API
method	O
does	O
exactly	O
this	O
:	O

Many	O
of	O
the	O
most	O
common	O
array	O
statistics	O
(	O
like	O
sum	O
and	O
mean	O
)	O
are	O
DataFrame	B-API
methods	O
,	O

so	O
using	O
apply	B-API
is	O
not	O
necessary	O
.	O

Element-wise	O
Python	O
functions	O
can	O
be	O
used	O
,	O
too	O
.	O

Suppose	O
you	O
wanted	O
to	O
compute	O
a	O
formatted	O
string	O
from	O
each	O
floating	O
point	O
value	O
in	O
frame	O
.	O

You	O
can	O
do	O
this	O
with	O
applymap	B-API
:	O

The	O
reason	O
for	O
the	O
name	O
applymap	B-API
is	O
that	O
Series	O
has	O
a	O
map	B-API
method	O
for	O
applying	O
an	O
element-wise	O
function	O
:	O

Summing	O
up	O
,	O
`	O
apply	B-API
`	O
works	O
on	O
a	O
row	O
/	O
column	O
basis	O
of	O
a	O
DataFrame	B-API
,	O
`	O
applymap	B-API
`	O
works	O
element-wise	O
on	O
a	O
DataFrame	B-API
,	O
and	O
`	O
map	B-API
`	O
works	O
element-wise	O
on	O
a	O
Series	O
.	O

strictly	O
speaking	O
,	O
applymap	B-API
internally	O
is	O
implemented	O
via	O
apply	B-API
with	O
a	O
little	O
wrap-up	O
over	O
passed	O
function	O
parameter	O
(	O
rougly	O
speaking	O
replacing	O
`	O
func	O
`	O
to	O
`	O
lambda	O
x	O
:	O
[	O
func	O
(	O
y	O
)	O
for	O
y	O
in	O
x	O
]`	O
,	O
and	O
applying	O
column-wise	O
)	O

Thanks	O
for	O
the	O
explanation	O
.	O

Since	O
`	O
map	B-API
`	O
and	O
`	O
applymap	B-API
`	O
both	O
work	O
element-wise	O
,	O
I	O
would	O
expect	O
a	O
single	O
method	O
(	O
either	O
`	O
map	B-API
`	O
or	O
`	O
applymap	B-API
`)	O
which	O
would	O
work	O
both	O
for	O
a	O
Series	O
and	O
a	O
DataFrame	B-API
.	O

Probably	O
there	O
are	O
other	O
design	O
considerations	O
,	O
and	O
Wes	O
McKinney	O
decided	O
to	O
come	O
up	O
with	O
two	O
different	O
methods	O
.	O

It's	O
on	O
page	O
129	O
in	O
my	O
copy	O
for	O
some	O
reason	O
.	O

There's	O
no	O
label	O
for	O
second	O
edition	O
or	O
anything	O
.	O

Is	O
there	O
a	O
way	O
to	O
do	O
`	O
applymap	B-API
`	O
along	O
with	O
`	O
groupby	B-API
`	O
function	O
in	O
pandas	O
?	O

Adding	O
to	O
the	O
other	O
answers	O
,	O
in	O
a	O
`	O
Series	B-API
`	O
there	O
are	O
also	O
map	B-API
and	O
apply	B-API
.	O

Apply	B-API
can	O
make	O
a	O
DataFrame	B-API
out	O
of	O
a	O
series	O
;	O
however	O
,	O
map	B-API
will	O
just	O
put	O
a	O
series	O
in	O
every	O
cell	O
of	O
another	O
series	O
,	O
which	O
is	O
probably	O
not	O
what	O
you	O
want	O
.	O

Also	O
if	O
I	O
had	O
a	O
function	O
with	O
side	O
effects	O
,	O
such	O
as	O
"	O
connect	O
to	O
a	O
web	O
server	O
"	O
,	O
I'd	O
probably	O
use	O
`	O
apply	B-API
`	O
just	O
for	O
the	O
sake	O
of	O
clarity	O
.	O

`	O
Map	B-API
`	O
can	O
use	O
not	O
only	O
a	O
function	O
,	O
but	O
also	O
a	O
dictionary	O
or	O
another	O
series	O
.	O

Let's	O
say	O
you	O
want	O
to	O
manipulate	O
permutations	O
.	O

Take	O

The	O
square	O
of	O
this	O
permutation	O
is	O

You	O
can	O
compute	O
it	O
using	O
`	O
map	B-API
`	O
.	O

Not	O
sure	O
if	O
self-application	O
is	O
documented	O
,	O
but	O
it	O
works	O
in	O
`	O
0.15.1	O
`	O
.	O

Also	O
,	O
.apply()	B-API
lets	O
you	O
pass	O
in	O
kwargs	O
into	O
the	O
function	O
while	O
.map()	B-API
doesn't	O
.	O

@USER	O
mentioned	O
that	O
apply	B-API
works	O
on	O
row	O
/	O
columns	O
,	O
while	O
applymap	B-API
works	O
element-wise	O
.	O

But	O
it	O
seems	O
you	O
can	O
still	O
use	O
apply	B-API
for	O
element-wise	O
computation	O
....	O

Good	O
catch	O
with	O
this	O
.	O

The	O
reason	O
this	O
works	O
in	O
your	O
example	O
is	O
because	O
np.sqrt	O
is	O
a	O
ufunc	O
,	O
i.e.	O
if	O
you	O
give	O
it	O
an	O
array	O
,	O
it	O
will	O
broadcast	O
the	O
sqrt	O
function	O
onto	O
each	O
element	O
of	O
the	O
array	O
.	O

So	O
when	O
apply	B-API
pushes	O
np.sqrt	O
on	O
each	O
columns	O
,	O
np.sqrt	O
works	O
itself	O
on	O
each	O
of	O
the	O
elements	O
of	O
the	O
columns	O
,	O
so	O
you	O
are	O
essentially	O
getting	O
the	O
same	O
result	O
as	O
applymap	B-API
.	O

There's	O
great	O
information	O
in	O
these	O
answers	O
,	O
but	O
I'm	O
adding	O
my	O
own	O
to	O
clearly	O
summarize	O
which	O
methods	O
work	O
array-wise	O
versus	O
element-wise	O
.	O
jeremiahbuddha	O
mostly	O
did	O
this	O
but	O
did	O
not	O
mention	O
Series.apply	B-API
.	O

I	O
don't	O
have	O
the	O
rep	O
to	O
comment	O
.	O

`	O
DataFrame.apply	B-API
`	O
operates	O
on	O
entire	O
rows	O
or	O
columns	O
at	O
a	O
time	O
.	O

`	O
DataFrame.applymap	B-API
`	O
,	O
`	O
Series.apply	B-API
`	O
,	O
and	O
`	O
Series.map	B-API
`	O
operate	O
on	O
one	O

element	O
at	O
time	O
.	O

There	O
is	O
a	O
lot	O
of	O
overlap	O
between	O
the	O
capabilities	O
of	O
`	O
Series.apply	B-API
`	O
and	O
`	O
Series.map	B-API
`	O
,	O
meaning	O
that	O
either	O
one	O
will	O
work	O
in	O
most	O
cases	O
.	O

They	O
do	O
have	O
some	O
slight	O
differences	O
though	O
,	O
some	O
of	O
which	O
were	O
discussed	O
in	O
osa's	O
answer	O
.	O

Just	O
wanted	O
to	O
point	O
out	O
,	O
as	O
I	O
struggled	O
with	O
this	O
for	O
a	O
bit	O

this	O
does	O
not	O
modify	O
the	O
dataframe	B-API
itself	O
,	O
has	O
to	O
be	O
reassigned	O

I	O
sometimes	O
have	O
trouble	O
in	O
figuring	O
out	O
whether	O
you	O
have	O
to	O
reassign	O
or	O
not	O
after	O
doing	O
something	O
with	O
the	O
df	O
.	O

It's	O
mostly	O
trial	O
and	O
error	O
for	O
me	O
,	O
but	O
I	O
bet	O
there	O
is	O
a	O
logic	O
to	O
how	O
it	O
works	O
(	O
that	O
I	O
am	O
missing	O
out	O
)	O
.	O

in	O
general	O
,	O
a	O
pandas	O
dataframe	B-API
is	O
only	O
modified	O
by	O
either	O
reassigning	O
`	O
df	O
=	O
modified_df	O
`	O
or	O
if	O
you	O
set	O
`	O
inplace=True	O
`	O
flag	O
.	O

Also	O
dataframe	B-API
will	O
change	O
if	O
you	O
pass	O
a	O
dataframe	B-API
to	O
a	O
function	O
by	O
reference	O
and	O
the	O
function	O
modifies	O
the	O
dataframe	B-API

This	O
is	O
not	O
entirely	O
true	O
,	O
think	O
of	O
`	O
.ix	B-API
`	O
or	O
`	O
.where	B-API
`	O
etc	O
.	O

Not	O
sure	O
what	O
the	O
full	O
explanation	O
is	O
for	O
when	O
you	O
need	O
to	O
re-assign	O
and	O
when	O
not	O
.	O

Probably	O
simplest	O
explanation	O
the	O
difference	O
between	O
apply	B-API
and	O
applymap	B-API
:	O

apply	B-API
takes	O
the	O
whole	O
column	O
as	O
a	O
parameter	O
and	O
then	O
assign	O
the	O
result	O
to	O
this	O
column	O

applymap	B-API
takes	O
the	O
separate	O
cell	O
value	O
as	O
a	O
parameter	O
and	O
assign	O
the	O
result	O
back	O
to	O
this	O
cell	O
.	O

NB	O
If	O
apply	B-API
returns	O
the	O
single	O
value	O
you	O
will	O
have	O
this	O
value	O
instead	O
of	O
the	O
column	O
after	O
assigning	O
and	O
eventually	O
will	O
have	O
just	O
a	O
row	O
instead	O
of	O
matrix	O
.	O

