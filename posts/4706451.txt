How to save a figure remotely with pylab ? [ duplicate ]
This question already has an answer here :
Generating a PNG with matplotlib when DISPLAY is undefined

10 answers
I'm trying to generate a figure at a remote computer with the command ` pylab.savefig ` .
But I got such error :
How can I save the figure properly ?
Related : stackoverflow.com/questions/2801882
By default , matplotlib will use something like the ` TkAgg ` backend . This requires an X-server to be running .
While you can just use X-forwarding , there will be a noticeable lag as matplotlib tries to connect with the remote X-server . If you don't need to interact with the plot , it's often nicer to speed things up by avoiding an X-connection entirely .
If you want to make a plot without needing an X-server at all , use the ` Agg ` backend instead .
E.g. do something like this :
If you want this to be the default behavior , you can modify your matplotlibrc file to use the ` Agg ` backend by default .
See this article for more information .
I had the same problem with gerry . For me , Joe's trick alone is not enough , I also needed to do ssh -X nos@USER.com instead of just ssh
Thanks a lot . This solution is more clear than any other solution ....
Hello Joe , I got a kind of questions i plot . I need expert advice like you , please have a look stackoverflow.com/questions/36248016
matplotlib.use ( ' Agg ') did not work for me but changing the backend default to Agg in the matplotlibrc file ( located at / usr / local / lib / python2.7 / dist-packages / matplotlib / mpl-data / m atplotlibrc ) worked for me
still I have the runtime error :( File " / home / user / anaconda2 / lib / python2.7 / site-packages / matplotlib / backends / backend_qt 5.py " , line 138 , in _create_qApp raise RuntimeError ( ' Invalid DISPLAY variable ') RuntimeError : Invalid DISPLAY variable
Umm , set the DISPLAY variable properly ?
Graphics over the network using X11 work by the client ( remote ) computer having a DISPLAY environment variable that says where to draw the graphics . Typically it would be something like mydesktop.example.com:0.0 - then when an X11 program tries to draw something , it gets whizzed over the network to mydesktop.example.com , which is the machine you are sitting in front of ( the X server ) and up it pops .
Now , if the machine in front of you is Windows , then you'll need to get an X server from somewhere - cygwin / X11 or commercial eXceed will do nicely .
You also need to make sure security is handled - you cant just have anyone writing to your screen over the network .
How are you connecting to the remote machine ? Because if you are going from a Linux box to another Linux box with ssh then the simple solution is probably ' Use ssh -X foo.example.com ' to connect - this pipes the X11 connection over a local socket .
So , if ssh -X isnt the answer , can we have some more info on the operating systems involved please ?
Thanks for your explanation . I'm ssh a linux machine under windows . Is that possible to make the figure without X11 ?
Not so that it appears on-screen - you'd have to get pylab to write it to a file and then copy that file to your Windows box . Maybe give winswitch.org a go - that's an easy interface to fancy cross-platform graphics fun .
I did " ssh -X username @USER " from my linux box to another linux box and it worked
Hello Spacedman , I got a kind of questions i plot . I need expert advice like you , please have a look stackoverflow.com/questions/36248016