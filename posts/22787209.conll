How	O
to	O
have	O
clusters	O
of	O
stacked	O
bars	O
with	O
python	O
(	O
Pandas	O
)	O

So	O
here	O
is	O
how	O
my	O
data	O
set	O
looks	O
like	O
:	O

I	O
want	O
to	O
have	O
stacked	O
bar	O
plot	O
for	O
each	O
dataframe	B-API
but	O
since	O
they	O
have	O
same	O
index	O
,	O
I'd	O
like	O
to	O
have	O
2	O
stacked	O
bars	O
per	O
index	O
.	O

I've	O
tried	O
to	O
plot	O
both	O
on	O
the	O
same	O
axes	O
:	O

But	O
it	O
overlaps	O
.	O

Then	O
I	O
tried	O
to	O
concat	B-API
the	O
two	O
dataset	O
first	O
:	O

but	O
here	O
everything	O
is	O
stacked	O

My	O
best	O
try	O
is	O
:	O

Which	O
gives	O
:	O

This	O
is	O
basically	O
what	O
I	O
want	O
,	O
except	O
that	O
I	O
want	O
the	O
bar	O
ordered	O
as	O

(	O
df1	O
,	O
A	O
)	O
(	O
df2	O
,	O
A	O
)	O
(	O
df1	O
,	O
B	O
)	O
(	O
df2	O
,	O
B	O
)	O
etc	O
...	O

I	O
guess	O
there	O
is	O
a	O
trick	O
but	O
I	O
can't	O
found	O
it	O
!	O

After	O
@USER	O
'	O
s	O
answer	O
I	O
got	O
this	O
:	O

Which	O
is	O
almost	O
what	O
I	O
want	O
.	O

I	O
would	O
like	O
the	O
bar	O
to	O
be	O
clustered	O
by	O
index	O
,	O
in	O
order	O
to	O
have	O
something	O
visually	O
clear	O
.	O

Bonus	O
:	O
Having	O
the	O
x-label	O
not	O
redundant	O
,	O
something	O
like	O
:	O

Thanks	O
for	O
helping	O
.	O

So	O
,	O
I	O
eventually	O
found	O
a	O
trick	O
(	O
edit	O
:	O
see	O
below	O
for	O
using	O
seaborn	O
and	O
longform	O
dataframe	B-API
):	O

Solution	O
with	O
pandas	O
and	O
matplotlib	O

Here	O
it	O
is	O
with	O
a	O
more	O
complete	O
example	O
:	O

And	O
it	O
gives	O
that	O
:	O

You	O
can	O
change	O
the	O
colors	O
of	O
the	O
bar	O
by	O
passing	O
a	O
`	O
cmap	O
`	O
argument	O
:	O

Solution	O
with	O
seaborn	O
:	O

Given	O
the	O
same	O
df1	O
,	O
df2	O
,	O
df3	O
,	O
below	O
,	O
I	O
convert	O
them	O
in	O
a	O
long	O
form	O
:	O

The	O
problem	O
with	O
seaborn	O
is	O
that	O
it	O
doesn't	O
stack	B-API
bars	O
natively	O
,	O
so	O
the	O
trick	O
is	O
to	O
plot	O
the	O
cumulative	O
sum	O
of	O
each	O
bar	O
on	O
top	O
of	O
each	O
other	O
:	O

Then	O
loop	O
over	O
each	O
group	O
of	O
`	O
variable	O
`	O
and	O
plot	O
the	O
cumulative	O
sum	O
:	O

It	O
lacks	O
the	O
legend	O
that	O
can	O
be	O
added	O
easily	O
I	O
think	O
.	O

The	O
problem	O
is	O
that	O
instead	O
of	O
hatches	O
(	O
which	O
can	O
be	O
added	O
easily	O
)	O
to	O
differentiate	O
the	O
dataframes	O
we	O
have	O
a	O
gradient	O
of	O
lightness	O
,	O
and	O
it's	O
a	O
bit	O
too	O
light	O
for	O
the	O
first	O
one	O
,	O
and	O
I	O
don't	O
really	O
know	O
how	O
to	O
change	O
that	O
without	O
changing	O
each	O
rectangle	O
one	O
by	O
one	O
(	O
as	O
in	O
the	O
first	O
solution	O
)	O
.	O

Tell	O
me	O
if	O
you	O
don't	O
understand	O
something	O
in	O
the	O
code	O
.	O

Feel	O
free	O
to	O
re-use	O
this	O
code	O
which	O
is	O
under	O
CC0	O
.	O

Nice	O
!	O

How	O
an	O
this	O
be	O
plotted	O
with	O
mpld3	O
?	O

I	O
don't	O
know	O
mpdld3	O
,	O
but	O
from	O
what	O
I	O
understood	O
from	O
the	O
doc	O
,	O
you	O
just	O
need	O
to	O
display	O
it	O
with	O
`	O
mpld3.display	O
(	O
plt.gcf()	O
)`	O
,	O
or	O
something	O
similar	O
.	O

Could	O
you	O
do	O
me	O
a	O
huge	O
favor	O
and	O
put	O
this	O
snipplet	O
under	O
BSD	O
/	O
MIT	O
/	O
CC-0	O
?	O

Thanks	O
:)	O

@USER	O
:	O
Done	O
,	O
have	O
fun	O
!	O

Thank	O
you	O
!	O

It	O
was	O
very	O
helpful	O
.	O

I	O
have	O
managed	O
to	O
do	O
the	O
same	O
using	O
pandas	O
and	O
matplotlib	O
subplots	O
with	O
basic	O
commands	O
.	O

Here's	O
an	O
example	O
:	O

The	O
dataframe	B-API
structure	O
of	O
"	O
subset	O
"	O
before	O
grouping	O
looks	O
like	O
this	O
:	O

and	O
the	O
plot	O
like	O
this	O
:	O

It	O
is	O
formatted	O
in	O
the	O
"	O
ggplot	O
"	O
style	O
with	O
the	O
following	O
header	O
:	O

Great	O
answer	O
,	O
but	O
it	O
is	O
harder	O
to	O
follow	O
without	O
the	O
data	O
to	O
replicate	O
.	O

Is	O
it	O
possible	O
to	O
download	O
the	O
data	O
somewhere	O
?	O

You're	O
on	O
the	O
right	O
track	O
!	O

In	O
order	O
to	O
change	O
the	O
order	O
of	O
the	O
bars	O
,	O
you	O
should	O
change	O
the	O
order	O
in	O
the	O
index	O
.	O

So	O
we	O
want	O
to	O
swap	O
axes	O
,	O
then	O
reorder	O
.	O

Here's	O
an	O
easy	O
way	O
to	O
do	O
this	O

If	O
it's	O
important	O
that	O
your	O
horizontal	O
labels	O
show	O
up	O
in	O
the	O
old	O
order	O
(	O
df1	O
,	O
A	O
)	O
rather	O
than	O
(	O
A	O
,	O
df1	O
)	O
,	O
we	O
can	O
just	O
`	O
swaplevel	B-API
`	O
s	O
again	O
and	O
not	O
`	O
sort_index	B-API
`	O
:	O

Thanks	O
,	O
it	O
works	O
aaaalmost	O
as	O
expected	O
.	O

I'd	O
like	O
to	O
have	O
something	O
visually	O
clear	O
,	O
here	O
all	O
bars	O
are	O
equally	O
distributed	O
along	O
the	O
x-axis	O
,	O
I'd	O
like	O
to	O
have	O
clustered	O
2	O
by	O
2	O
.	O

Sorry	O
I	O
did	O
not	O
mention	O
that	O
in	O
the	O
question	O
.	O

(	O
I'll	O
edit	O
)	O

Altair	O
can	O
be	O
helpful	O
here	O
.	O

Here	O
is	O
the	O
produced	O
plot	O
.	O

Imports	O

Dataset	O
creation	O

Preparing	O
dataset	O

Altair	O
plot	O

